<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Jacuzzi Bingo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }
        .bingo-grid-cell {
            transition: background-color 0.3s, color 0.3s;
            min-height: 80px; /* Adjusted for smaller screens (mobile portrait) */
            word-break: break-word; /* Ensure long text breaks */
            overflow-wrap: break-word; /* For older browsers */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.3rem; /* Adjusted padding for smaller screens */
            font-size: 0.75rem; /* text-xs for mobile portrait */
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .bingo-grid-cell {
                min-height: 100px; /* Slightly larger for small tablets/landscape phones */
                font-size: 0.875rem; /* text-sm */
            }
        }
        @media (min-width: 1024px) { /* lg breakpoint */
            .bingo-grid-cell {
                min-height: 120px; /* Original height for larger screens */
                font-size: 1rem; /* text-base */
            }
        }
        .bingo-grid-cell.marked {
            background-color: #34D399 !important; /* Tailwind's green-400 */
            color: white !important;
        }
        [data-tooltip] {
            position: relative;
            cursor: pointer;
        }
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #1f2937; /* gray-800 */
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 10;
        }
        [data-tooltip]:hover::after {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-stone-900">Jacuzzi Bingo</h1>
            <p class="mt-2 text-lg text-stone-600">An Interactive Experience</p>
        </header>

        <div class="bg-white rounded-2xl shadow-lg p-6">
            <nav class="flex justify-center border-b border-stone-200 mb-6 flex-wrap">
                <button data-card="0" class="nav-button py-3 px-3 sm:px-6 font-semibold text-stone-500 border-b-2 border-transparent hover:text-amber-600 hover:border-amber-500 transition text-sm sm:text-base">Card 1</button>
                <button data-card="1" class="nav-button py-3 px-3 sm:px-6 font-semibold text-stone-500 border-b-2 border-transparent hover:text-amber-600 hover:border-amber-500 transition text-sm sm:text-base">Card 2</button>
                <button data-card="2" class="nav-button py-3 px-3 sm:px-6 font-semibold text-stone-500 border-b-2 border-transparent hover:text-amber-600 hover:border-amber-500 transition text-sm sm:text-base">Card 3</button>
                <button data-card="3" class="nav-button py-3 px-3 sm:px-6 font-semibold text-stone-500 border-b-2 border-transparent hover:text-amber-600 hover:border-amber-500 transition text-sm sm:text-base">Card 4</button>
                <button data-card="4" class="nav-button py-3 px-3 sm:px-6 font-semibold text-stone-500 border-b-2 border-transparent hover:text-amber-600 hover:border-amber-500 transition text-sm sm:text-base">Card 5</button>
            </nav>

            <div id="app-body" class="grid grid-cols-1 gap-8">
                <div id="bingo-card-container">
                    <h2 id="card-title" class="text-2xl font-bold text-center mb-4 text-stone-800"></h2>
                    <div id="bingo-grid" class="grid grid-cols-5 gap-2">
                        </div>
                </div>
            </div>
        </div>

        <footer class="text-center mt-8 text-stone-500">
            <p>Click on a square to mark it. Navigate between cards using the buttons above.</p>
        </footer>
    </div>

    <script>
        const bingoData = {
            items: {
                "Someone catches a group of cousins smoking weed": "Medium", "Physical violence (adults)": "Hard", "Cops arrive": "Hard", "Kid gets in the fountain": "Medium",
                "Influencer in the wild": "Medium", "Lynn insults someone": "Easy", "Someone gets so drunk they get asked to leave": "Medium", "Ambulance or medical emergency Addison solves": "Hard",
                "Meg tells the hate f**k store": "Medium", "Bee sting / allergy attack": "Hard", "Remo asks \"what do you know?\"": "Medium", "Awkward toast": "Hard", "Broken Glass": "Easy",
                "Makeout": "Medium", "Fred Cline says fuck": "Medium", "Mom get mad at Dad for drinking": "Easy", "Someone falls over": "Medium", "Addison and Emma bust a move": "Easy",
                "Dan P calls someone an idiot to their face": "Easy", "Conspiracy theory told seriously": "Easy", "Mom gets mad about marijuana": "Easy", "Awkward use of foul language": "Easy", "Awkward divorce comment": "Medium",
                "Visible Asian lettering tattoo": "Medium", "People start talking crypto": "Medium", "Someone asks for money": "Hard", "Someone's mentions getting laid off": "Medium", "Someone falls asleep": "Hard",
                "Lynn talks about Peregrin money": "Easy", "An LGBTQIA+?": "Easy", "Black Jacuzzi": "Hard", "Someone brings a live animal (non-human)": "Medium", "Slutty outfit (verified by one other player)": "Medium",
                "Someone wears a mask": "Hard", "MAGA gear": "Hard", "Jennifer gets drunk": "Hard", "Unexepected or unwelcome speech": "Hard", "Unwelcome DJ": "Hard",
                "A relative offers unsolicited (and likely unhelpful) life advice": "Medium", "Addison solves": "Hard"
            },
            cards: [
                [
                    "Unwelcome DJ", "Someone falls over", "Black Jacuzzi", "Someone asks for money", "Addison and Emma bust a move",
                    "People start talking crypto", "Lynn talks about Peregrin money", "Lynn insults someone", "Someone brings a live animal (non-human)", "Addison solves",
                    "Physical violence (adults)", "Addison and Emma bust a move", "FREE SPACE", "Someone gets so drunk they get asked to leave", "Awkward divorce comment",
                    "Addison and Emma bust a move", "MAGA gear", "Bee sting / allergy attack", "Someone catches a group of cousins smoking weed", "Someone's mentions getting laid off",
                    "Awkward toast", "Someone falls asleep", "Fred Cline says fuck", "Addison and Emma bust a move", "Someone brings a live animal (non-human)"
                ],
                [
                    "Addison and Emma bust a move", "Mom gets mad about marijuana", "Someone gets so drunk they get asked to leave", "Addison and Emma bust a move", "Addison and Emma bust a move",
                    "Awkward toast", "Someone brings a live animal (non-human)", "Someone catches a group of cousins smoking weed", "Someone gets so drunk they get asked to leave", "Someone's mentions getting laid off",
                    "Broken Glass", "Jennifer gets drunk", "FREE SPACE", "Addison and Emma bust a move", "Black Jacuzzi",
                    "Mom get mad at Dad for drinking", "Lynn talks about Peregrin money", "Bee sting / allergy attack", "Conspiracy theory told seriously", "Slutty outfit (verified by one other player)",
                    "Someone falls over", "Physical violence (adults)", "Addison and Emma bust a move", "Kid gets in the fountain", "Addison and Emma bust a move"
                ],
                [
                    "Someone gets so drunk they get asked to leave", "Conspiracy theory told seriously", "Addison and Emma bust a move", "MAGA gear", "Addison and Emma bust a move",
                    "Addison and Emma bust a move", "An LGBTQIA+?", "Someone's mentions getting laid off", "Bee sting / allergy attack", "Awkward divorce comment",
                    "Someone falls over", "Physical violence (adults)", "FREE SPACE", "Addison and Emma bust a move", "Slutty outfit (verified by one other player)",
                    "Mom gets mad about marijuana", "Lynn talks about Peregrin money", "Kid gets in the fountain", "Unexepected or unwelcome speech", "Makeout",
                    "Addison and Emma bust a move", "Someone brings a live animal (non-human)", "Addison and Emma bust a move", "Someone falls asleep", "Broken Glass"
                ],
                [
                    "Someone brings a live animal (non-human)", "Someone gets so drunk they get asked to leave", "Addison and Emma bust a move", "Conspiracy theory told seriously", "Addison and Emma bust a move",
                    "Addison and Emma bust a move", "Slutty outfit (verified by one other player)", "Unexepected or unwelcome speech", "Addison and Emma bust a move", "Addison and Emma bust a move",
                    "Awkward toast", "Someone gets so drunk they get asked to leave", "FREE SPACE", "Lynn talks about Peregrin money", "Fred Cline says fuck",
                    "Someone falls over", "Awkward use of foul language", "Bee sting / allergy attack", "Addison and Emma bust a move", "Mom gets mad about marijuana",
                    "Black Jacuzzi", "Kid gets in the fountain", "Someone's mentions getting laid off", "An LGBTQIA+?", "Addison and Emma bust a move"
                ],
                [
                    "Addison and Emma bust a move", "Someone gets so drunk they get asked to leave", "Someone falls over", "Addison and Emma bust a move", "Unwelcome DJ",
                    "Someone's mentions getting laid off", "Slutty outfit (verified by one other player)", "Fred Cline says fuck", "A relative offers unsolicited (and likely unhelpful) life advice", "Someone brings a live animal (non-human)",
                    "Lynn insults someone", "Addison and Emma bust a move", "FREE SPACE", "Mom get mad at Dad for drinking", "Unexepected or unwelcome speech",
                    "Addison and Emma bust a move", "Mom gets mad about marijuana", "Someone falls asleep", "Someone gets so drunk they get asked to leave", "Addison and Emma bust a move",
                    "Lynn talks about Peregrin money", "Someone catches a group of cousins smoking weed", "Addison and Emma bust a move", "Kid gets in the fountain", "Physical violence (adults)"
                ]
            ]
        };

        const players = ["Reagan", "Anastasia", "Jacqueline", "Madison", "Garrett"];

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        const shuffledPlayers = shuffleArray([...players]); // Shuffle players once

        let currentCardIndex = 0;

        const bingoGrid = document.getElementById('bingo-grid');
        const cardTitle = document.getElementById('card-title');
        const navButtons = document.querySelectorAll('.nav-button');

        function getDifficulty(item) {
            if (item === "FREE SPACE") return "Free";
            // A bug in previous generation duplicated "Addison and Emma bust a move". This handles it.
            if (item === "Addison and Emma bust a move") return "Easy";
            return bingoData.items[item] || "Unknown";
        }

        function renderCard(cardIndex) {
            currentCardIndex = cardIndex;
            bingoGrid.innerHTML = '';
            cardTitle.textContent = `${shuffledPlayers[cardIndex]}'s Bingo Card`;

            const cardItems = bingoData.cards[cardIndex];
            cardItems.forEach(item => {
                const cell = document.createElement('div');
                const difficulty = getDifficulty(item);
                
                cell.className = 'bingo-grid-cell flex items-center justify-center p-2 text-center font-medium rounded-lg shadow-sm cursor-pointer';
                cell.textContent = item;
                
                if (item === 'FREE SPACE') {
                    cell.classList.add('marked', 'text-lg', 'bg-amber-400', 'text-white');
                    cell.dataset.tooltip = "Free Space!";
                } else {
                     cell.classList.add('bg-stone-100', 'hover:bg-amber-100');
                     cell.dataset.tooltip = `Difficulty: ${difficulty}`;
                }

                cell.addEventListener('click', () => {
                    if (item !== 'FREE SPACE') {
                        const wasMarked = cell.classList.contains('marked');
                        cell.classList.toggle('marked');
                        if (!wasMarked) { // If it was just marked
                            confetti({
                                particleCount: 100,
                                spread: 70,
                                origin: { y: 0.6 }
                            });
                        }
                    }
                });
                bingoGrid.appendChild(cell);
            });

            updateNavButtons();
        }

        function updateNavButtons() {
            navButtons.forEach(button => {
                if (parseInt(button.dataset.card) === currentCardIndex) {
                    button.classList.add('text-amber-600', 'border-amber-500');
                    button.classList.remove('text-stone-500', 'border-transparent');
                } else {
                    button.classList.remove('text-amber-600', 'border-amber-500');
                    button.classList.add('text-stone-500', 'border-transparent');
                }
            });
        }

        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                renderCard(parseInt(button.dataset.card));
            });
        });

        document.addEventListener('DOMContentLoaded', () => {
            renderCard(0);
        });
    </script>
</body>
</html>
